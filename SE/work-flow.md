# 搜索流程
### 功能确认
#### 第一步：需要确认是否需要该功能【做不做?】
```md
但凡涉及到有信息度的，数据量较大的，则可以有搜索功能。
比如看视频，视频有发布者、视频名称、参演人等等；
比如商品，有风格、有品牌、有类型等等；
再比如新闻网站，信息量更直观些，也是可以有搜索功能的。
```
#### 第二步：确认重要性【入口确定、资源确定等】
```md
非常重要: 数据量过大，用户目的相对明确，有某一主题或者更具体的要求，搜索可以极大的提高用户体验，比如:搜索引擎、电商网站。
次级重要: 用户随意性较高，并无较强的目的性，比如:新闻资讯类网站，该部分实效性的要求远高于搜索。
```
#### 第三步：确认目的【搜索形式、搜索算法】
```md
分析用户使用搜索的目的是什么，对结果的定义是什么。
```

### 输入
* 输入的类型
```md
文本、语音、图片、二维码等等，由于不同的输入内容，我们对信息的解析，以及后续检索排序都有不同的方法。
```
```md
如果用户输入是语音的话，那么第一步需要将语音转化为文本语言，然后继续走NLP相关的路径。
如果用户输入时图片，那么需要对图片提取特征，理解并进行搜索。
如果是二维码的话，直接跳转到页面，或者直接给结果即可。
```
* 输入优化
```md
搜索框内展示搜索格式内容的帮助;
提供搜索建议（自动填充可能搜索的内容）;
将部分详情展示出来（多用于电商类产品）；
自动纠错;
有搜索结果的相似词;
热门搜索词语;
基于该用户推荐的词语。
```
### 意图识别
* 判断类型
```md
结果型，搜索的内容有明确的结果的，比如：爱因斯坦出生于什么时候？
段落型，搜索的结果需要用大段文字来表述，比如：人工智能是什么？
展示型，搜索的结果是一些信息的展示，比如商品，职位……
```
* 判断意图
```md
意图通常与知识图谱，或者说字典交相辉映。
```
```md
字典一般包含：词干化，停用词，同义词，一词多义，上下位词语
```
### 检索和排序
#### 检索
```md
基于向量的信息检索中，标准的做法：余弦相似度，通过计算两个向量的余弦来确定两个文本的相似度。
```
* 结果型
```md
一般是依靠知识图谱来查询相关的结果的。
```
* 段落型
```md
根据用户的输入，通过查找文档–>查找段落–>根据需求决定是否需要段落摘要
最简单的段落摘要，就是高亮，将命中的前后多少字作为段落摘要的内容，复杂点，可以通过AI来自动生成一些段落摘要。
```
* 展示型
```md
确定搜索范围，进行搜索。
```
### 排序
* 算法排序
```md
在进行信息筛选的时候，算法已经给了每个结果的数值。
```
* 人工干预排序
```md
主要展示在页面中的排序。
```
* 总结
```md
算法的排序结果是机器给的，不同产品时期，算法功力都会对排序产生影响。
作为PM，可以把希望的结果以及一些bad case给到，来进行算法的优化。

页面中的排序，主要是PM根据需求来定的，通过对业务的了解、用户需求的把握，筛选出合理的排序条件。
```
## 输出
### 有结果
* 卡片展示
```md
卡片适合每块信息量较少的情况；
整体来看，卡片的展示数量较列表来说是多的。
在卡片中，用户操作不宜过多。
```
* 列表展示
```md
由于列表占用空间较多，因此如果有更多的操作或者信息的展示，可以列表来展示；
整体来看，展示数量少于卡片的展示。
```
* 个性展示
```md
比如地图找房
```
### 无结果
```md
最简单直观做法：展示没有任何结果页面，再加上提示“抱歉没有您要搜索的内容，请换个词语试试看”。
```
* 流程优化的做法：
* * 预防 - 防止无结果的情况发生
```md
搜索框内展示搜索格式内容的帮助;
提供搜索建议（自动填充可能搜索的内容）;
更好的理解用户的输入，建立自己的字典（停用词、同义词等，详见意图识别部分）;
将部分详情展示出来（多用于电商类产品）。
```
* * 恢复：在无结果的情况下，帮助用户回到正轨
```md
自动纠错;
提示有搜索结果的相似词;
帮助文档，应当如何搜索。
```
* * 变通：将错误变成新的机会
```md
展示类似的结果；
热门搜索词语；
基于该用户推荐的词语;
提供用户反馈；
允许用户贡献内容（常见UGC产品）；
当有内容时告知用户（常见于实效性不强且用户在某方面敏感型的产品，比如地产类、机票低价提醒）
```
### 结果优化【产品层】
```md
在搜索的时候，假如结果不如意，如何让用户继续留在页面上，并找到自己想要的结果。
```
* 筛选
```md
筛选是一个有力的交互过程，意味着用户的需求明确，要求的结果更加精准。
我们最怕的是用户不知道自己要什么，因此我们在设计的时，希望通过一系列的小功能，比如筛选比如提示，来让用户明确自己的需求。
```
* * Pinterest 的筛选
```md
当你输入查询条件后，会自动弹出你的输入+另外一个组合词。
Pinterest的做法相当于结果——反馈——新的结果，不断循环，对用户的感知更顺畅更友好，且用户本身对事物的掌控也一直没有被削弱。
```
* 输入输出改进

### 结果评估&优化【数据算法层】
* 分析输入，了解用户
```md
可以通过分析入口，分析Query，并结合用户画像、用户分类，进行输入分析，了解用户在我们的产品上，输入较多的是哪些类别、哪些内容。
接下来的算法策略就可以根据这部分进行一些参考。
```
* 评估输出，优化算法
```md
通过业务指标来评估，比如CTR、业务指标的转化率等。
通过A/B testing来做不同算法间的比较。
通过人工来评估。
```
```md
由于A/B testing 需要耗费的技术资源较多，大家可以根据自己公司的进度以及资源程度决定是否要做；剩下两个是建议一起做。
业务指标来看总的效果，人工评估来发现一些明显的典型case。
```
