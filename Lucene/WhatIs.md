# Lucene
```md
是一个开放源代码的全文检索引擎工具包，但它不是一个完整的全文检索引擎，
而是一个全文检索引擎的架构，提供了完整的查询引擎和索引引擎，部分文本分析引擎。

Lucene 的目的是为软件开发人员提供一个简单易用的工具包，
以方便的在目标系统中实现全文检索的功能，或者是以此为基础建立起完整的全文检索引擎。
```
## 概念
* 前缀后缀规则(Prefix+Suffix)
```md
在 Lucene 的反向索引中，要保存词典的信息，所有的词在词典中是按照字典顺序进行排列的，
然后词典中包含了文档中的几乎所有的词，并且有的词还是很长的，这样索引文件会非常的大，
所谓前缀后缀规则，就是某个词和前一个词有共同的前缀的时候，后面的词仅仅保存前缀在词中的偏移(offset)，和剩下的部分(后缀)。
```
* 差值规则(Delta)
```md
在 Lucene 的反向索引中，需要保存很多整形数字的信息，比如文档ID号，比如词在文档中的位置等等。
整形数字是以可变长整型的格式存储的。随着数值的增大，每个数字占用的比特位增多。
所谓差值规则就是先后保存两个整数的时候，后面的整数仅仅保存和前面整数的差即可。
```
* 文档权重(Document boost) 在索引时给某个文档设置的权重值
* 域权重(Field boost) 在查询的时候给某个域设置的权重值
* 调整因子(Coord)
```md
基于文档中包含查询关键词个数计算出来的调整因子。
一般而言，如果一个文档中相比其它的文档出现了更多的查询关键词，那么其值越大。
```
* 逆文档频率(Inerse document frequency)
```md
基于Term的一个因子，存在的意义是告诉打分公式一个词的稀有程度。
其值越低，词越稀有
(这里的值是指单纯的频率，即多少个文档中出现了该词；而非指 Lucene 中 idf 的计算公式)。
打分公式利用这个因子提升包含稀有词文档的权重。
```
* 长度归一化(Length norm)
```md
基于域的一个归一化因子。
其值由给定域中Term的个数决定(在索引文档的时候已经计算出来了，并且存储到了索引中)。
域越的文本越长，因子的权重越低。这表明 Lucene 打分公式偏向于域包含 Term 少的文档。
```
* 词频(Term frequency)
```md
基于Term的一个因子。
用来描述给定Term在一个文档中出现的次数，词频越大，文档的得分越大。
```
* 查询归一化因子(Query norm)
```md
基于查询语句的归一化因子。
其值为查询语句中每一个查询词权重的平方和。
查询归一化因子使得比较不同查询语句的得分变得可行，当然比较不同查询语句得分并不总是那么易于实现和可行的。
```